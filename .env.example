# LibVips Docker 图像处理环境配置文件
# 复制此文件为 .env 并根据需要修改配置

# =================================================================
# 目录挂载配置
# =================================================================

# 输入图像文件目录（只读挂载）
INPUT_FOLDER=./input

# 输出图像文件目录
OUTPUT_FOLDER=./output

# 日志文件目录
LOG_FOLDER=./logs

# =================================================================
# 处理配置
# =================================================================

# 并行处理线程数（建议不超过 CPU 核心数的 2 倍）
THREADS=4

# 是否启用本地缓存模式（true=适合NFS环境，false=适合本地存储）
USE_LOCAL_CACHE=true

# 日志级别（DEBUG, INFO, WARN, ERROR）
LOG_LEVEL=INFO

# 时区设置
TZ=Asia/Tokyo

# =================================================================
# 资源限制配置
# =================================================================

# 内存限制（支持单位：M, G）
MEMORY_LIMIT=2G

# CPU 限制（建议比线程数高 1.5-2 倍以避免资源竞争）
CPU_LIMIT=6.0

# =================================================================
# 配置示例和建议
# =================================================================

# 高性能配置示例（16核32GB内存服务器）:
# THREADS=16
# CPU_LIMIT=20.0
# MEMORY_LIMIT=8G
# USE_LOCAL_CACHE=true

# 低资源配置示例（4核8GB内存服务器）:
# THREADS=2
# CPU_LIMIT=3.0
# MEMORY_LIMIT=1G
# USE_LOCAL_CACHE=false

# NFS 环境优化配置:
# USE_LOCAL_CACHE=true
# MEMORY_LIMIT=4G

# 本地存储环境配置:
# USE_LOCAL_CACHE=false
# MEMORY_LIMIT=2G